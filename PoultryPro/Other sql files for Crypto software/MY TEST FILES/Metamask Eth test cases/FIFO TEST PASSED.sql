
SELECT COUNT(*) FROM tblEthTransaction WHERE ToAddress = '0x68b3465833fb72a70ecdf485e0e4c7bd8665fc45' 


SELECT * FROM tblEthTransaction WHERE userID = 'c48408cc-c3d9-4545-b03e-fd3a028c46c4'

SELECT * FROM tblTransactionS WHERE userID = 'c48408cc-c3d9-4545-b03e-fd3a028c46c4' ORDER BY TransactionDate asc

--FIFO TEST STARTED HERE -- IT PASSED PERFECTLY.
SELECT TransactionDate,type, Value, valueUSD, HistoricalPrice, TransactionFeeUSD,ShortTermCostBasis,ShortTermSalesProceed,ShortTermCapitalGainOrLoss  
FROM tblTransactionS WHERE userID = 'c48408cc-c3d9-4545-b03e-fd3a028c46c4' ORDER BY TransactionDate asc

SELECT SUM(ShortTermCostBasis),SUM(ShortTermSalesProceed), SUM(ShortTermCapitalGainOrLoss)  
FROM tblTransactionS WHERE userID = 'c48408cc-c3d9-4545-b03e-fd3a028c46c4' ORDER BY TransactionDate asc
--214.537232033344751	203.019476967386122	-11.517755065958629

--Fifo
DECLARE @DIFFDATA AS DECIMAL(18, 7)
--1st
SELECT 0.001320000000000 * 3385.11		--4.46834520000000000
SET @DIFFDATA = 0.062 - 0.00132
SELECT @DIFFDATA  --0.0606800
--2nd sell
SELECT 0.001229999 * 3385.11		--4.16368191489

SET @DIFFDATA = 0.0606800 - 0.001229999
SELECT @DIFFDATA  --0.0594500
--3rd SELL
SELECT 0.001889995000000 * 3385.11   --6.39784097445000000

SET @DIFFDATA = 0.0594500 - 0.001889995000000
SELECT @DIFFDATA  --0.0575600

--4th sell - 0

--5th SELL
SELECT 0.001860000000000 * 3385.11   --6.29630460000000000

SET @DIFFDATA = 0.0575600 - 0.00186
SELECT @DIFFDATA  --0.0557000

--6th SELL
SELECT 0.054893051787450 * 3385.11   --185.81901853621486950

SET @DIFFDATA = 0.0557000 - 0.054893051787450
SELECT @DIFFDATA  --0.0008069

-- 7th SELL
-- tricky because sell is more than buy for the first time
-- take all buy -- 
-- then diff flows to next buy
SELECT 0.0008069 * 3385.11 + (0.00093 - 0.0008069) * 3522.49  -- 3.165063778

SET @DIFFDATA = 0.045319991000000 - 0.0001231
SELECT @DIFFDATA -- 0.0451969

--8th
SELECT 0.001199999000000 * 3522.49		-- 4.22698447751

SET @DIFFDATA = 0.0451969 - 0.001199999
SELECT @DIFFDATA						-- 0.0439969


